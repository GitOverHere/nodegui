(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{179:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return r})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return d}));var a=n(2),o=n(6),i=(n(0),n(465)),l={},r={id:"development/styling",title:"styling",description:"How styling works?",source:"@site/docs/development/styling.md",permalink:"/docs/development/styling",editUrl:"https://github.com/nodegui/nodegui/edit/master/website/docs/development/styling.md"},s=[{value:"Painting",id:"painting",children:[]},{value:"Layout",id:"layout",children:[{value:"Implementation",id:"implementation",children:[]},{value:"FlexItem",id:"flexitem",children:[]},{value:"YogaWidget",id:"yogawidget",children:[]},{value:"NodeWidget",id:"nodewidget",children:[]}]}],c={rightToc:s};function d(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h1",{id:"how-styling-works"},"How styling works?"),Object(i.b)("p",null,"There are two parts to styling."),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Layout"),Object(i.b)("li",{parentName:"ol"},"Painting : Colors, text color, etc")),Object(i.b)("h2",{id:"painting"},"Painting"),Object(i.b)("p",null,"The regular styles such as text color, font-size, font weight etc are achieved using Qt's stylesheet.\nWe just call Qt's setStyleSheet method on the native widget and pass in the styles as a string."),Object(i.b)("p",null,"This method is implemented as part of ",Object(i.b)("inlineCode",{parentName:"p"},"QWIDGET_WRAPPED_METHODS_DECLARATION")," in ",Object(i.b)("inlineCode",{parentName:"p"},"qwidget_macro.h"),".\nSo all widgets using this macro will get the setStyleSheet method."),Object(i.b)("h2",{id:"layout"},"Layout"),Object(i.b)("p",null,"Layouting is basically positioning widgets on the screen. It takes into account everything from margins, paddings, positions etc. Our main focus will be Flex layouting. For flex layout we are using yoga library from facebook. This is the same library used by React Native. Before looking at flaxlayout in this libarary I recommend browsing Yoga's C API doc here: ",Object(i.b)("inlineCode",{parentName:"p"},"deps/yoga/doc.md")),Object(i.b)("p",null,"In case ",Object(i.b)("inlineCode",{parentName:"p"},"nodegui"),". I have implemented a custom Qt layout by extending ",Object(i.b)("inlineCode",{parentName:"p"},"QLayout"),", hence Qt is able to take over automagically when window is resized or any other layouting event occurs.\nYou can find the implementation at ",Object(i.b)("inlineCode",{parentName:"p"},"src/cpp/core/FlexLayout/flexlayout.h"),"."),Object(i.b)("p",null,"The c++ api provided by this custom layout looks like this:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-cpp"}),"    // FlexLayout is a custom Layout built for QT. This layout will be used to layout qt widgets using facebook's yoga library.\n    // Thus giving ability to layout Qt Widgets using Flexbox.\n    // Usage:\n    QWidget *container = new QWidget();\n    YGNodeRef root = YGNodeNew();\n    YGNodeRef child1 = YGNodeNew();\n    YGNodeRef child2 = YGNodeNew();\n    FlexLayout * flayout = new FlexLayout(container,root);\n// or  FlexLayout * flayout = new FlexLayout(container);\n// or  FlexLayout *flayout = new FlexLayout();\n\n    flayout->addWidget(btn1, child1);\n    flayout->addWidget(btn2, child2);\n\n")),Object(i.b)("p",null,"This layout is exported to Javascript side via ",Object(i.b)("inlineCode",{parentName:"p"},"src/cpp/core/FlexLayout/flexlayout_wrap.h")),Object(i.b)("p",null,"The JS Api looks like this:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'const view = new QWidget(rootView);\n\nconst flayout = new FlexLayout(); // Create layout\nflayout.setFlexNode(view.getFlexNode()); // Set widget\'s flex as layout\'s flex node.\n\nview.setLayout(flayout); // set layout as view\'s layout\n\nconst label = new QLabel(view);\nlabel.setText("Hello12321");\n\nconst label2 = new QLabel(view);\nlabel2.setText("SECOND LABEL");\n\nflayout.addWidget(label2, label2.getFlexNode()); // Add child to layout\nflayout.addWidget(label, label.getFlexNode()); // Add child to layout\n')),Object(i.b)("h3",{id:"implementation"},"Implementation"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Every widget that wants to use flex layout should extend from ",Object(i.b)("inlineCode",{parentName:"p"},"flexItem")," found at ",Object(i.b)("inlineCode",{parentName:"p"},"src/cpp/core/FlexLayout/flexitem.h"),".\nFor example, see ",Object(i.b)("inlineCode",{parentName:"p"},"nlabel.h")," at ",Object(i.b)("inlineCode",{parentName:"p"},"src/cpp/QtWidgets/QLabel/nlabel.h")),Object(i.b)("p",{parentName:"li"},"NLabel inherits from ",Object(i.b)("inlineCode",{parentName:"p"},"NodeWidget")," which inherits from ",Object(i.b)("inlineCode",{parentName:"p"},"YogaWidget")," which inturn inherits from ",Object(i.b)("inlineCode",{parentName:"p"},"FlexItem")),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"FlexItem")," adds a YogaNode to every widget."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"YogaWidget")," adds Yoga specific q-properties to the widget, which is useful to assign yoga properties via qstylesheet. More on this below."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"NodeWidget")," adds layout support via ",Object(i.b)("inlineCode",{parentName:"li"},"YogaWidget")," and event handling support via ",Object(i.b)("inlineCode",{parentName:"li"},"EventWidget"))))),Object(i.b)("h3",{id:"flexitem"},"FlexItem"),Object(i.b)("p",null,"FlexItem : ",Object(i.b)("inlineCode",{parentName:"p"},"src/cpp/core/FlexLayout/flexitem.h")," add flexnode to each widget.\nFlexItem adds methods like getFlexNode."),Object(i.b)("h3",{id:"yogawidget"},"YogaWidget"),Object(i.b)("p",null,"Qt StyleSheet allows you to specify style properties just like in web. You could specify font-size, margin, padding, etc. Qt StyleSheet also allows custom style properties via Qt's q-property system."),Object(i.b)("p",null,"So in order to enable yoga based properties like alignItems, justifyContent, flex, etc via qt's stylesheet we\ndeclare and define q properties for each of those custom properties we want.\nThis allows us to use something like:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"view.setStyleSheet(`\n    background-color:green;\n    qproperty-flex: 1;\n    qproperty-alignItems: 'center';\n`);\n")),Object(i.b)("p",null,"Notice ",Object(i.b)("inlineCode",{parentName:"p"},"qproperty-")," prefix? These are the custom q-properties we defined in ",Object(i.b)("inlineCode",{parentName:"p"},"YogaWidget.h"),". We do not need to prefix ",Object(i.b)("inlineCode",{parentName:"p"},"qproperty-")," if a stylehsheet string is passed through ",Object(i.b)("inlineCode",{parentName:"p"},"StyleSheet.create()"),". StyleSheet.create has an autoprefixer which will do the right thing."),Object(i.b)("h3",{id:"nodewidget"},"NodeWidget"),Object(i.b)("p",null,"Every widget we implement should inherit from NodeWidget. This helps us add all the properties we want in the widgets via a single class. NodeWidget is the class that contains properties and methods shared by all widgets. This class allows us to add features to all widgets easily."))}d.isMDXComponent=!0},465:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return y}));var a=n(0),o=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=o.a.createContext({}),d=function(e){var t=o.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=d(e.components);return o.a.createElement(c.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},u=o.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=d(n),u=a,y=p["".concat(l,".").concat(u)]||p[u]||b[u]||i;return n?o.a.createElement(y,r(r({ref:t},c),{},{components:n})):o.a.createElement(y,r({ref:t},c))}));function y(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=u;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r.mdxType="string"==typeof e?e:a,l[1]=r;for(var c=2;c<i;c++)l[c]=n[c];return o.a.createElement.apply(null,l)}return o.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);